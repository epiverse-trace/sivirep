<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="es">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Customized Analyses • sivirep</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png">
<link rel="icon" type="”image/svg+xml”" href="../favicon.svg">
<link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png">
<link rel="icon" sizes="any" href="../favicon.ico">
<link rel="manifest" href="../site.webmanifest">
<script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Customized Analyses">
<!-- Google tag (gtag.js) --><script async src="https://www.googletagmanager.com/gtag/js?id=G-XZ471458FQ"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-XZ471458FQ');
</script>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">
    <a href="https://epiverse-trace.github.io/" class="external-link"><img src="https://epiverse-trace.github.io/blueprints/logo_white.svg" id="logo" alt="Epiverse-TRACE"></a>
    <a class="navbar-brand me-2" href="../index.html">sivirep</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">1.0.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../articles/sivirep.html">Get started</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-generar-reportes" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Generar reportes</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-generar-reportes">
<li><a class="dropdown-item" href="../articles/automated_report.html">Plantilla reporte automatizado</a></li>
    <li><a class="dropdown-item" href="../articles/custom_analysis.html">Análisis personalizados</a></li>
    <li><a class="dropdown-item" href="../articles/resources.html">Recursos</a></li>
  </ul>
</li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-get-started-en-" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Get started (EN)</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-get-started-en-">
<li><a class="dropdown-item" href="../articles/sivirep_en.html">Quick start</a></li>
    <li><a class="dropdown-item" href="../articles/custom_analysis_en.html">Custom analysis</a></li>
  </ul>
</li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/epiverse-trace/sivirep/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch">
<li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul>
</li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.svg" class="logo" alt=""><h1>Customized Analyses</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/epiverse-trace/sivirep/blob/v1.0.2/vignettes/articles/custom_analyses_en.Rmd" class="external-link"><code>vignettes/articles/custom_analyses_en.Rmd</code></a></small>
      <div class="d-none name"><code>custom_analyses_en.Rmd</code></div>
    </div>

    
    
<p>Below is a basic set of instructions for using <code>sivirep</code>
if:</p>
<ul>
<li>You have already produced an .Rmd file and wish to edit a
report.</li>
<li>You wish to perform customized analyses without an .Rmd file.</li>
</ul>
<div class="section level3">
<h3 id="setup">Setup<a class="anchor" aria-label="anchor" href="#setup"></a>
</h3>
<p>You can start by importing the package with the following
command:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://epiverse-trace.github.io/sivirep/">sivirep</a></span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="importing-data-from-sivigila">1. Importing Data from SIVIGILA<a class="anchor" aria-label="anchor" href="#importing-data-from-sivigila"></a>
</h3>
<p>The SIVIGILA source provides historical case list data up to the last
closed epidemiological year. For most diseases, the closing usually
happens in April of the following year.</p>
<p>You can check the available diseases and years using:</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">event_list</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/list_events.html">list_events</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<p>Once you have decided on the disease and year, use
<code>import_data_event</code> to import data from SIVIGILA using a
parameterized format based on disease and year:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_event</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/import_data_event.html">import_data_event</a></span><span class="op">(</span></span>
<span>  year <span class="op">=</span> <span class="fl">2020</span>,</span>
<span>  nombre_event <span class="op">=</span> <span class="st">"Dengue"</span>,</span>
<span>  cache <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>💡 <strong>Tip</strong>: Avoid delays when importing data by setting
<code>cache = TRUE</code>.</p>
</blockquote>
</div>
<div class="section level3">
<h3 id="cleaning-sivigila-data">2. Cleaning SIVIGILA Data<a class="anchor" aria-label="anchor" href="#cleaning-sivigila-data"></a>
</h3>
<p>SIVIGILA data is a highly reliable official information source, with
ISO certification for data quality. However, there may sometimes be
outliers in the data that require additional cleaning.</p>
<p><code>sivirep</code> provides a generic function called
<code>limpiar_data_sivigila</code> that encompasses various tasks to
identify and correct errors, inconsistencies, and discrepancies in
datasets in order to improve their quality and accuracy. This process
may include the removal of duplicates, correction of typographical
errors, replacement of missing values, and data validation, among other
tasks such as eliminating improbable dates, cleaning geolocation codes,
and standardizing column names and age categories.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_event</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/limpiar_data_sivigila.html">limpiar_data_sivigila</a></span><span class="op">(</span>data_event <span class="op">=</span> <span class="va">data_event</span><span class="op">)</span></span></code></pre></div>
<p>The cleaning functions within <code>limpiar_data_sivigila</code> have
been compiled and created based on the experience of field
epidemiologists. These may include internal functions such as:</p>
<ul>
<li><p><code>limpiar_encabezado</code>: a function that cleans and
standardizes column names in SIVIGILA case list data based on the
SIVIGILA data dictionary.</p></li>
<li><p><code>limpiar_edad_event</code>: a function that cleans the ages
in SIVIGILA case list data.</p></li>
<li><p><code>limpiar_fecha_event</code>: a function that cleans the
dates in disease data.</p></li>
</ul>
<p>The user can use these functions individually or simply use the
generic wrapper function <code>limpiar_data_sivigila</code>.</p>
</div>
<div class="section level3">
<h3 id="filtering-cases">3. Filtering Cases<a class="anchor" aria-label="anchor" href="#filtering-cases"></a>
</h3>
<p><code>sivirep</code> provides a function that allows filtering
disease data by department or municipality name called
<code>geo_filtro</code>. This enables the user to create a
subnational-level report by selecting specific cases based on geographic
location.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">filtered_data_event</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/geo_filtro.html">geo_filtro</a></span><span class="op">(</span></span>
<span>  data_event <span class="op">=</span> <span class="va">data_event</span>,</span>
<span>  dpto <span class="op">=</span> <span class="st">"Choco"</span></span>
<span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="temporal-distribution-of-cases">4. Temporal Distribution of Cases<a class="anchor" aria-label="anchor" href="#temporal-distribution-of-cases"></a>
</h3>
<p>In <code>sivirep</code>, the temporal distribution of cases is
defined by the variables “symptom onset date” and “notification date.”
For each of these variables, there are specialized functions to group
the data and generate graphs.</p>
<div class="section level4">
<h4 id="grouping-by-symptom-onset-date">4.1. Grouping by Symptom Onset Date<a class="anchor" aria-label="anchor" href="#grouping-by-symptom-onset-date"></a>
</h4>
<p>To generate the distribution of cases by symptom onset date, it is
necessary to group the data by these variables. <code>sivirep</code>
provides a function that allows this grouping called
<code>agrupar_fecha_inisintomas</code>.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_ini_symptoms</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/agrupar_fecha_inisintomas.html">agrupar_fecha_inisintomas</a></span><span class="op">(</span></span>
<span>  data_event <span class="op">=</span></span>
<span>    <span class="va">data_event</span></span>
<span><span class="op">)</span></span></code></pre></div>
<blockquote>
<p>💡 <strong>Tip</strong>: Get the top n months with the most cases</p>
<p>When building a section of the report or analyzing these data, it may
be helpful to find the months with the most cases. In
<code>sivirep</code>, you can use the function
<code>obtener_meses_mas_casos</code> to obtain this information.</p>
</blockquote>
<p>The graph to visualize this distribution should be generated with the
<code>plot_fecha_inisintomas</code> function. Keep in mind that even if
you have grouped the data by day, you might prefer to represent it by
epidemiological week, as follows:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_fecha_inisintomas.html">plot_fecha_inisintomas</a></span><span class="op">(</span></span>
<span>  data_agrupada <span class="op">=</span> <span class="va">cases_ini_symptoms</span>,</span>
<span>  uni_marca <span class="op">=</span> <span class="st">"semanaepi"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p><img src="custom_analyses_en_files/figure-html/plot-fecha-inicio-sintomas-1.png" width="768"></p>
</div>
</div>
<div class="section level3">
<h3 id="age-and-sex-analysis">5. Age and Sex Analysis<a class="anchor" aria-label="anchor" href="#age-and-sex-analysis"></a>
</h3>
<div class="section level4">
<h4 id="sex-variable">5.1. Sex Variable<a class="anchor" aria-label="anchor" href="#sex-variable"></a>
</h4>
<p>When analyzing or reporting disease data, it is often necessary to
determine the distribution of cases by gender or sex. However, the
SIVIGILA source only records sex.</p>
<p><code>sivirep</code> provides a function that automatically
aggregates and calculates percentages by sex after the cleaning
process.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/agrupar_sex.html">agrupar_sex</a></span><span class="op">(</span></span>
<span>  data_event <span class="op">=</span> <span class="va">data_event</span>,</span>
<span>  porcentaje <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Additionally, <code>sivirep</code> includes a function to generate
the graph for this variable called <code>plot_sex</code>:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_sex.html">plot_sex</a></span><span class="op">(</span>data_agrupada <span class="op">=</span> <span class="va">cases_sex</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom_analyses_en_files/figure-html/plot-sexo-1.png" width="672"></p>
<p>The distribution of cases by sex and epidemiological week can be
generated using the function <code>agrupar_sex_semanaepi</code> provided
by <code>sivirep</code>.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_sex_week_epi</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/agrupar_sex_semanaepi.html">agrupar_sex_semanaepi</a></span><span class="op">(</span>data_event <span class="op">=</span> <span class="va">data_event</span><span class="op">)</span></span></code></pre></div>
<p>The corresponding visualization function is
<code>plot_sex_semanaepi</code>, which <code>sivirep</code> provides to
show the distribution of cases by sex and epidemiological week.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_sex_semanaepi.html">plot_sex_semanaepi</a></span><span class="op">(</span>data_agrupada <span class="op">=</span> <span class="va">cases_sex_week_epi</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom_analyses_en_files/figure-html/plot-sex-semana-epidemiologica-1.png" width="768"></p>
</div>
<div class="section level4">
<h4 id="age-variable">5.2. Age Variable<a class="anchor" aria-label="anchor" href="#age-variable"></a>
</h4>
<p>Age is an important variable to analyze, as it is a known risk factor
for many diseases. Certain diseases and conditions tend to occur more
frequently in specific age groups, and this distribution can help
identify populations at higher risk and implement targeted prevention
and control strategies.</p>
<p><code>sivirep</code> provides a function called
<code>agrupar_edad</code>, which can group disease data by age groups.
By default, this function produces age ranges in 10-year intervals.
Additionally, users can customize a different age range.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_age</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/agrupar_edad.html">agrupar_edad</a></span><span class="op">(</span>data_event <span class="op">=</span> <span class="va">data_event</span>, interval_edad <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
<p>The corresponding visualization function is
<code>plot_edad</code>.</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_edad.html">plot_edad</a></span><span class="op">(</span>data_agrupada <span class="op">=</span> <span class="va">cases_age</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom_analyses_en_files/figure-html/plot-edad-1.png" width="576"></p>
</div>
<div class="section level4">
<h4 id="age-and-sex-together">5.3. Age and Sex Together<a class="anchor" aria-label="anchor" href="#age-and-sex-together"></a>
</h4>
<p><code>sivirep</code> proporciona una función llamada
<code>agrupar_edad_sex</code>, que puede agrupar los datos de
enfermedades por rangos de edad y sexo de forma simultánea y obtener el
número de casos y los porcentajes correspondientes. Además, permite
personalizar el intervalo de edad.</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">cases_age_sex</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/agrupar_edad_sex.html">agrupar_edad_sex</a></span><span class="op">(</span></span>
<span>  data_event <span class="op">=</span> <span class="va">data_event</span>,</span>
<span>  interval_edad <span class="op">=</span> <span class="fl">10</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>La función de visualización correspondiente es
<code>plot_edad_sex</code>.</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/plot_edad_sex.html">plot_edad_sex</a></span><span class="op">(</span>data_agrupada <span class="op">=</span> <span class="va">cases_age_sex</span><span class="op">)</span></span></code></pre></div>
<p><img src="custom_analyses_en_files/figure-html/plot-edad-sexo-1.png" width="576"></p>
</div>
</div>
<div class="section level3">
<h3 id="spatial-distribution-of-cases">6. Spatial Distribution of Cases<a class="anchor" aria-label="anchor" href="#spatial-distribution-of-cases"></a>
</h3>
<p>Obtaining the spatial distribution of cases is useful for identifying
areas with a high concentration of cases, disease clusters, and
environmental or social risk factors.</p>
<p>In Colombia, there are 32 administrative geographic units (adm1)
called departments. <code>sivirep</code> provides a function called
<code>agrupar_mpio</code> that allows obtaining a data.frame of cases
grouped by department or municipality.</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dist_esp_dept</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/agrupar_mpio.html">agrupar_mpio</a></span><span class="op">(</span></span>
<span>  data_event <span class="op">=</span> <span class="va">filtered_data_event</span>,</span>
<span>  dpto <span class="op">=</span> <span class="st">"Choco"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Currently, with the function called <code>plot_map</code>, the user
can generate a static map of Colombia showing the distribution of cases
by departments and municipalities.</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mapa</span></span></code></pre></div>
<p><img src="custom_analyses_en_files/figure-html/mapa-1.png" width="960"></p>
<blockquote>
<p>💡 <strong>Tip</strong>: Obtain the row with the highest number of
cases</p>
<p>When building a section of the report or analyzing these data, it may
be useful to know which variable has the most cases. In
<code>sivirep</code>, you can use the function
<code>obtener_fila_mas_casos</code> to get this information. This
function works with any dataset that contains a column named
<code>"casos"</code> at any level of aggregation.</p>
</blockquote>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Geraldine Gómez-Millán, Zulma M. Cucunubá, Jennifer A. Mendez-Romero, Claudia Huguett-Aragón, International Development Research Center (IDRC).</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.9000. Theme provided by <a href="https://github.com/epiverse-trace/epiversetheme" class="external-link">epiversetheme</a> 0.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
